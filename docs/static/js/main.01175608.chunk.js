(this.webpackJsonpcoswap=this.webpackJsonpcoswap||[]).push([[0],{12:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return r})),n.d(t,"e",(function(){return l})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return c}));var a=n(13),i=n.n(a),u=n(471);function r(t){var n=t.indexOf("0",2),a=e.from(t.substring(2,n),"hex");return String.fromCharCode.apply(String,a).trim()}function l(t){var n=e.alloc(32);return n.fill(t,0,t.length),"0x"+n.toString("hex")}function o(e,t){var n,a={"Y+":t.getFullYear().toString(),"m+":(t.getMonth()+1).toString(),"d+":t.getDate().toString(),"H+":t.getHours().toString(),"M+":t.getMinutes().toString(),"S+":t.getSeconds().toString()};for(var i in a)(n=new RegExp("("+i+")").exec(e))&&(e=e.replace(n[1],1==n[1].length?a[i]:a[i].padStart(n[1].length,"0")));return e}function s(t,n){var a=t,i=n;n<t&&(a=n,i=t);var r=e.alloc(32);r.fill(a,0,t.length);var l=e.alloc(32);return l.fill(i,0,n.length),"0x"+e.from(u(e.concat([r,l]))).toString("hex")}function c(e,t,n){t||(t=18),n||(n=2);var a=new i.a(e).dividedBy(new i.a(10).pow(t));return a.comparedTo(1e6)>=0?a.dividedBy(1e6).toFixed(n,1)+"M":a.comparedTo(1e3)>=0?a.dividedBy(1e3).toFixed(n,1)+"K":a.toFixed(n,1)}}).call(this,n(11).Buffer)},238:function(e,t,n){e.exports=n(509)},243:function(e,t,n){},244:function(e,t,n){},357:function(e,t){},367:function(e,t){},381:function(e,t){},383:function(e,t){},393:function(e,t){},395:function(e,t){},422:function(e,t){},424:function(e,t){},425:function(e,t){},431:function(e,t){},433:function(e,t){},445:function(e,t){},447:function(e,t){},459:function(e,t){},462:function(e,t){},469:function(e,t){},479:function(e,t){},509:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),u=n(21),r=n.n(u),l=(n(243),n(244),n(245),n(231)),o=n.n(l),s=(n(151),n(93)),c=n.n(s),p=(n(78),n(15)),y=n.n(p),m=(n(79),n(2)),f=n.n(m),h=n(22),d=n(23),v=n(33),k=n(32),T=(n(110),n(51)),g=n.n(T),E=(n(304),n(234)),b=n.n(E),w=n(236),x=n.n(w),O=n(42),S=n.n(O),I=n(13),M=n.n(I),B=n(12),A=n(95),P=n.n(A),L=function(){function e(){Object(h.a)(this,e)}return Object(d.a)(e,[{key:"seroRpc",value:function(e,t,n,a){var i={id:0,jsonrpc:"2.0",method:t,params:n};P.a.post(e,i).then((function(e){var t=e.data;a&&a(t)})).catch((function(e){console.log("req error: ",e)}))}},{key:"post",value:function(e,t,n,a){P.a.post(e,t,{timeout:n}).then((function(e){var t=e.data;a&&a(t)})).catch((function(e){a(null,e)}))}},{key:"get",value:function(e,t){P.a.get(e).then((function(e){t&&t(e.data)}))}}]),e}(),j={name:"SWAP",contractAddress:"3V1HBTGg8F48wMGuz91BqHd7eTQVauppXsysNoFtt5ssDaymXxnnexAHLpjpkLvJXLxS34avbkwo6mjuYBSQ2Kmp",github:"https://github.com/coswap",author:"coswap",url:document.location.href,logo:document.location.protocol+"//"+document.location.host+"/logo.png"},D=x.a.callContract([{inputs:[{internalType:"address",name:"_tokenPool",type:"address"}],stateMutability:"payable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[],name:"SEROBYTES",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"key",type:"bytes32"},{internalType:"uint256",name:"_sharesBurned",type:"uint256"},{internalType:"uint256",name:"_minTokenA",type:"uint256"},{internalType:"uint256",name:"_minTokenB",type:"uint256"}],name:"divestLiquidity",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"drawRateMap",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"key",type:"bytes32"}],name:"feeRate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"feeRateMap",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32[]",name:"tokens",type:"bytes32[]"}],name:"getGroupTokens",outputs:[{internalType:"bytes32[][]",name:"rets",type:"bytes32[][]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"token",type:"bytes32"}],name:"getTokens",outputs:[{internalType:"bytes32[]",name:"rets",type:"bytes32[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"initializePair",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"_minShares",type:"uint256"}],name:"investLiquidity",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"lastIndexsMap",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"key",type:"bytes32"}],name:"orderIdss",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"key",type:"bytes32"}],name:"orderList",outputs:[{components:[{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"uint8",name:"orderType",type:"uint8"}],internalType:"struct SwapExchange.Order[]",name:"",type:"tuple[]"},{components:[{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"uint8",name:"orderType",type:"uint8"}],internalType:"struct SwapExchange.Order[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_startDay",type:"uint256"}],name:"output",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"key",type:"bytes32"}],name:"pairInfo",outputs:[{components:[{internalType:"bytes32",name:"tokenA",type:"bytes32"},{internalType:"bytes32",name:"tokenB",type:"bytes32"},{internalType:"uint256",name:"reserveA",type:"uint256"},{internalType:"uint256",name:"reserveB",type:"uint256"},{internalType:"uint256",name:"totalShares",type:"uint256"},{internalType:"uint256",name:"myShare",type:"uint256"},{internalType:"uint256",name:"shareRreward",type:"uint256"},{internalType:"uint256",name:"totalVolume",type:"uint256"},{internalType:"uint256",name:"selfVolume",type:"uint256"},{components:[{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"uint8",name:"orderType",type:"uint8"}],internalType:"struct SwapExchange.Order[]",name:"orderList",type:"tuple[]"},{components:[{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"uint8",name:"orderType",type:"uint8"}],internalType:"struct SwapExchange.Order[]",name:"myOrderList",type:"tuple[]"}],internalType:"struct SwapExchange.Pair",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"key",type:"bytes32"}],name:"pairInfoWithOrders",outputs:[{components:[{internalType:"bytes32",name:"tokenA",type:"bytes32"},{internalType:"bytes32",name:"tokenB",type:"bytes32"},{internalType:"uint256",name:"reserveA",type:"uint256"},{internalType:"uint256",name:"reserveB",type:"uint256"},{internalType:"uint256",name:"totalShares",type:"uint256"},{internalType:"uint256",name:"myShare",type:"uint256"},{internalType:"uint256",name:"shareRreward",type:"uint256"},{internalType:"uint256",name:"totalVolume",type:"uint256"},{internalType:"uint256",name:"selfVolume",type:"uint256"},{components:[{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"uint8",name:"orderType",type:"uint8"}],internalType:"struct SwapExchange.Order[]",name:"orderList",type:"tuple[]"},{components:[{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"uint8",name:"orderType",type:"uint8"}],internalType:"struct SwapExchange.Order[]",name:"myOrderList",type:"tuple[]"}],internalType:"struct SwapExchange.Pair",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"pairKeys",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"start",type:"uint256"},{internalType:"uint256",name:"end",type:"uint256"}],name:"pairList",outputs:[{components:[{internalType:"bytes32",name:"tokenA",type:"bytes32"},{internalType:"bytes32",name:"tokenB",type:"bytes32"},{internalType:"uint256",name:"reserveA",type:"uint256"},{internalType:"uint256",name:"reserveB",type:"uint256"},{internalType:"uint256",name:"totalShares",type:"uint256"},{internalType:"uint256",name:"myShare",type:"uint256"},{internalType:"uint256",name:"shareRreward",type:"uint256"},{internalType:"uint256",name:"totalVolume",type:"uint256"},{internalType:"uint256",name:"selfVolume",type:"uint256"},{components:[{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"uint8",name:"orderType",type:"uint8"}],internalType:"struct SwapExchange.Order[]",name:"orderList",type:"tuple[]"},{components:[{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"uint8",name:"orderType",type:"uint8"}],internalType:"struct SwapExchange.Order[]",name:"myOrderList",type:"tuple[]"}],internalType:"struct SwapExchange.Pair[]",name:"rets",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"token",type:"bytes32"},{internalType:"uint256",name:"start",type:"uint256"},{internalType:"uint256",name:"end",type:"uint256"}],name:"pairListByToken",outputs:[{components:[{internalType:"bytes32",name:"tokenA",type:"bytes32"},{internalType:"bytes32",name:"tokenB",type:"bytes32"},{internalType:"uint256",name:"reserveA",type:"uint256"},{internalType:"uint256",name:"reserveB",type:"uint256"},{internalType:"uint256",name:"totalShares",type:"uint256"},{internalType:"uint256",name:"myShare",type:"uint256"},{internalType:"uint256",name:"shareRreward",type:"uint256"},{internalType:"uint256",name:"totalVolume",type:"uint256"},{internalType:"uint256",name:"selfVolume",type:"uint256"},{components:[{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"uint8",name:"orderType",type:"uint8"}],internalType:"struct SwapExchange.Order[]",name:"orderList",type:"tuple[]"},{components:[{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"uint8",name:"orderType",type:"uint8"}],internalType:"struct SwapExchange.Order[]",name:"myOrderList",type:"tuple[]"}],internalType:"struct SwapExchange.Pair[]",name:"rets",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"key",type:"bytes32"},{internalType:"uint256",name:"_feeRate",type:"uint256"}],name:"setFeeRate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_tokenPool",type:"address"}],name:"setTokenPool",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"key",type:"bytes32"},{internalType:"uint256",name:"_minTokensReceived",type:"uint256"},{internalType:"uint256",name:"_timeout",type:"uint256"},{internalType:"address",name:"_recipient",type:"address"}],name:"swap",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"volumes",outputs:[{internalType:"uint256",name:"lastIndex",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"wholeVolume",outputs:[{internalType:"uint256",name:"lastIndex",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"key",type:"bytes32"}],name:"withdrawShareReward",outputs:[],stateMutability:"nonpayable",type:"function"}],"mcLeHCkWfoUBTLH1FskrKnoaxUSToY2U7sPiX93Qjijc5nRQ8bZghUE75caRYsQ2RvAM17KhXDYn7AUiQtmo4Kk"),R=new L,C=new(function(){function e(){Object(h.a)(this,e);this.init=new Promise((function(e,t){S.a.init(j,(function(n){return"success"===n?e():t(n)}))}))}return Object(d.a)(e,[{key:"getDecimalLocal",value:function(e){return"SERO"==e?18:localStorage.getItem("D_"+e)}},{key:"getDecimal",value:function(e,t){var n=this.getDecimalLocal(e);if(n)return t(n);S.a.getInfo((function(n){R.seroRpc(n.rpc,"sero_getDecimal",[e],(function(n){localStorage.setItem("D_"+e,new M.a(n.result,16).toNumber()),t(new M.a(n.result,16).toNumber())}))}))}},{key:"accountDetails",value:function(e,t){if(e){S.a.getAccountDetail(e,(function(e){var n=new Map;e.Balance&&e.Balance.forEach((function(e,t){n.set(t,e)})),t({pk:e.PK,mainPKr:e.MainPKr,name:e.Name,balances:n})}))}}},{key:"accountList",value:function(e){S.a.getAccountList((function(t){var n=[];t.forEach((function(e,t){var a=new Map;e.Balance&&e.Balance.forEach((function(e,t){a.set(t,e)})),n.push({pk:e.PK,mainPKr:e.MainPKr,name:e.Name,balances:a})})),e(n)}))}},{key:"callMethod",value:function(e,t,n,a,i){var u=e.packData(t,a,!0),r={from:n,to:e.address,data:u};S.a.call(r,(function(n){if("0x"!==n){var a=e.unPackDataEx(t,n);i&&i(a)}else i("0x0")}))}},{key:"executeMethod",value:function(e,t,n,a,i,u,r,l){var o="0x";""!==t&&(o=e.packData(t,i,!0));var s={from:n,to:e.address,value:"0x"+r.toString(16),data:o,gasPrice:"0x"+new M.a("1000000000").toString(16),cy:u},c={from:a,to:e.address,value:"0x"+r.toString(16),data:o,gasPrice:"0x"+new M.a("1000000000").toString(16),cy:u};S.a.estimateGas(c,(function(e,t){t?b.a.fail("Failed to execute smart contract"):(s.gas=e,S.a.executeContract(s,(function(e,t){l&&l(e,t)})))}))}},{key:"feeRate",value:function(e,t,n,a){var i=Object(B.c)(t,n);this.callMethod(D,"feeRate",e,[i],(function(e){a(Number(e[0]))}))}},{key:"getGroupTokens",value:function(e,t,n){var a=[];t.forEach((function(e){a.push(Object(B.e)(e))})),this.callMethod(D,"getGroupTokens",e,[a],(function(e){var a=[],i=new Map;e[0].forEach((function(e,n){if(e.length>0){a.push(t[n]);var u=[];e.forEach((function(e){u.push(Object(B.a)(e))})),i.set(t[n],u)}})),n(a,i)}))}},{key:"getTokens",value:function(e,t,n){this.callMethod(D,"getTokens",e,[Object(B.e)(t)],(function(e){n(e.rets)}))}},{key:"convertToPair",value:function(e){return{tokenA:Object(B.a)(e.tokenA),tokenB:Object(B.a)(e.tokenB),reserveA:e.reserveA,reserveB:e.reserveB,totalShares:e.totalShares,myShare:e.myShare,shareRreward:e.shareRreward,totalVolume:e.totalVolume,selfVolume:e.selfVolume,orders:e.orderList,selfOrders:e.myOrderList}}},{key:"orderList",value:function(e,t,n,a){var i=Object(B.c)(t,n);this.callMethod(D,"orderList",e,[i],(function(e){a(e)}))}},{key:"pairList",value:function(e,t,n){var a=this;t?this.callMethod(D,"pairListByToken",e,[Object(B.e)(t),0,1e3],(function(e){var t=[];e.rets.forEach((function(e){t.push(a.convertToPair(e))})),n(t)})):this.callMethod(D,"pairList",e,[0,1e3],(function(e){var t=[];e.rets.forEach((function(e){t.push(a.convertToPair(e))})),n(t)}))}},{key:"pairInfoWithOrders",value:function(e,t,n,a){var i=this,u=Object(B.c)(t,n);this.callMethod(D,"pairInfoWithOrders",e,[u],(function(u){var r=u[0];i.orderList(e,t,n,(function(e){})),a(i.convertToPair(r))}))}},{key:"initializePair",value:function(e,t,n,a,i){this.executeMethod(D,"initializePair",e,t,[],n,a,i)}},{key:"investLiquidity",value:function(e,t,n,a,i,u){this.executeMethod(D,"investLiquidity",e,t,[n],a,i,u)}},{key:"divestLiquidity",value:function(e,t,n,a,i,u,r,l){var o=Object(B.c)(n,a);this.executeMethod(D,"divestLiquidity",e,t,[o,i,u,r],"",0,l)}},{key:"swap",value:function(e,t,n,a,i,u,r){var l=Object(B.c)(n,a),o=Math.round(new Date/1e3)+600;this.executeMethod(D,"swap",e,t,[l,u,o,t],n,i,r)}},{key:"withdrawShareReward",value:function(e,t,n,a,i){var u=Object(B.c)(n,a);this.executeMethod(D,"withdrawShareReward",e,t,[u],"",0,i)}}]),e}()),K=(n(228),n(41)),z=n.n(K),V=(n(500),n(237)),_=n.n(V),F=n(96),W=(n(229),n(52)),q=n.n(W),H=function(e){Object(v.a)(n,e);var t=Object(k.a)(n);function n(e){return Object(h.a)(this,n),t.call(this,e)}return Object(d.a)(n,[{key:"render",value:function(){var e,t=this.props,n=t.onChange,a=t.selectedOption,u=t.options;return a&&a.value,u&&(e=u.map((function(e,t){return i.a.createElement("option",{key:t,value:e.value},e.label)}))),i.a.createElement("select",{style:{width:"100%",height:"33px"},onChange:function(e){if(n){var t=e.target.options[e.target.selectedIndex];n(t)}}},e)}}]),n}(a.Component),N=function(e){Object(v.a)(n,e);var t=Object(k.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).state={pk:e.pk,account:{balances:new Map},tokens:[],tokenToTokens:new Map,tokenInAmount:0,tokenOutAmount:0,orderType:0},a}return Object(d.a)(n,[{key:"init",value:function(e){var t=this,n=[];if(e.balances.forEach((function(e,t){n.push(t)})),0!=n.length){new Map;C.getGroupTokens(e.mainPKr,n,(function(e,n){e.length>0&&t.initPair(e[0],n.get(e[0])[0],(function(a){t.setState({tokenIn:e[0],tokenOut:n.get(e[0])[0],tokens:e,tokenToTokens:n,pair:a})}))}))}}},{key:"initPair",value:function(e,t,n){console.log("initPair",e,t),C.pairInfoWithOrders(this.state.account.mainPKr,e,t,(function(e){n(e)}))}},{key:"componentDidMount",value:function(){var e=this;C.init.then((function(){C.accountDetails(e.state.pk,(function(t){e.setState({account:t},(function(){e.init(t)}))}))}))}},{key:"componentWillReceiveProps",value:function(e,t){var n=this;console.log("change account",e.pk),C.accountDetails(e.pk,(function(e){n.setState({account:e},(function(){n.init(e)}))}))}},{key:"showRate",value:function(e){if(e&&this.state.pair&&0!=Number(e)){var t,n=this,a=this.state.pair,i=new M.a(a.reserveA),u=new M.a(a.reserveB),r=i.multipliedBy(u);C.feeRate(this.state.account.mainPKr,a.tokenA,a.tokenB,(function(l){var o=1e4-l;n.state.tokenIn==a.tokenA?(i=i.plus(new M.a(e).multipliedBy(Math.pow(10,C.getDecimalLocal(a.tokenA)))),t=(t=(t=u.minus(r.dividedBy(i))).multipliedBy(o).div(1e4)).dividedBy(Math.pow(10,C.getDecimalLocal(a.tokenA)))):(u=u.plus(new M.a(e*o/1e4).multipliedBy(Math.pow(10,C.getDecimalLocal(a.tokenB)))),t=(t=i.minus(r.dividedBy(u))).dividedBy(Math.pow(10,C.getDecimalLocal(a.tokenA))));var s=t.dividedBy(e).toFixed(3);n.setState({tokenInAmount:e,tokenOutAmount:t.toNumber(),price:s})}))}else this.setState({tokenInAmount:e,tokenOutAmount:0,price:0})}},{key:"exchange",value:function(e,t,n,a){C.swap(this.state.account.pk,this.state.account.mainPKr,e,t,n,a)}},{key:"renderOrders",value:function(){var e=this;if(this.state.pair)return(0==this.state.orderType?this.state.pair.orders.sort((function(e,t){return t.timestamp-e.timestamp})):this.state.pair.selfOrders.sort((function(e,t){return t.timestamp-e.timestamp}))).map((function(t,n){var a=e.state.pair.tokenA,u=e.state.pair.tokenB;return 1==t.orderType&&(a=e.state.pair.tokenB,u=e.state.pair.tokenA),i.a.createElement(q.a.Item,{key:n},i.a.createElement(f.a,{style:{fontSize:"14px"}},i.a.createElement(f.a.Item,{style:{flex:3,textAlign:"left"}},i.a.createElement("span",null,Object(B.b)("mm-dd HH:MM",new Date(1e3*t.timestamp)))),i.a.createElement(f.a.Item,{style:{flex:3,textAlign:"left"}},i.a.createElement("span",null,Object(B.d)(t.amountIn)," ",a)),i.a.createElement(f.a.Item,{style:{flex:1,textAlign:"center"}},i.a.createElement("span",null,"->")),i.a.createElement(f.a.Item,{style:{flex:3,textAlign:"right"}},i.a.createElement("span",null,Object(B.d)(t.amountOut)," ",u))))}))}},{key:"render",value:function(){var e,t=this,n=this,a=[],u=[];this.state.tokens.forEach((function(e){a.push({value:e,label:e})}));var r=this.state.tokenToTokens.get(this.state.tokenIn);r&&r.forEach((function(e){u.push({value:e,label:e})}));var l=0;return this.state.account.balances.has(this.state.tokenIn)&&(l=this.state.account.balances.get(this.state.tokenIn)),i.a.createElement("div",null,i.a.createElement(y.a,{size:"lg"}),i.a.createElement(z.a,null,i.a.createElement(z.a.Body,null,i.a.createElement("div",null,i.a.createElement(f.a,{style:{textAlign:"center"}},i.a.createElement(f.a.Item,null,"\u5151\u6362"),i.a.createElement(f.a.Item,null,"\u6570\u91cf"),i.a.createElement(f.a.Item,null,"\u4f59\u989d:",Object(B.d)(l,C.getDecimalLocal(this.state.tokenIn)))),i.a.createElement(y.a,{size:"lg"}),i.a.createElement(f.a,null,i.a.createElement(f.a.Item,{style:{flex:1}},i.a.createElement(H,{options:a,selectedOption:{value:this.state.tokenIn},onChange:function(e){var a=t.state.tokenToTokens.get(e.value)[0];t.initPair(e.value,a,(function(t){n.setState({pair:t,tokenIn:e.value,tokenOut:a}),n.showRate(n.state.tokenInAmount)}))}})),i.a.createElement(f.a.Item,{style:{flex:2}},i.a.createElement("input",{type:"text",defaultValue:this.state.tokenInAmount,style:{width:"100%",height:"33px"},onChange:function(e){t.showRate(e.target.value)}}))),i.a.createElement(y.a,{size:"lg"}),i.a.createElement(f.a,null,i.a.createElement(f.a.Item,{style:{flex:1}},i.a.createElement("div",null,"\u83b7\u53d6\u5e01\u79cd"))),i.a.createElement(y.a,{size:"lg"}),i.a.createElement(f.a,null,i.a.createElement(f.a.Item,{style:{flex:1}},i.a.createElement(H,{options:u,onChange:function(e){t.initPair(t.state.tokenIn,e.value,(function(t){n.setState({pair:t,tokenOut:e.value}),n.showRate(n.state.tokenInAmount)}))}})),i.a.createElement(f.a.Item,{style:{flex:2}},i.a.createElement("input",(e={type:"text",value:0},Object(F.a)(e,"value",this.state.tokenOutAmount),Object(F.a)(e,"style",{width:"100%",height:"33px"}),Object(F.a)(e,"onChange",(function(e){})),e)))),i.a.createElement(y.a,{size:"lg"}),i.a.createElement(f.a,null,i.a.createElement(f.a.Item,null,this.state.price>0&&i.a.createElement("span",null,"\u5f53\u524d\u9884\u4f30\u4ef7: 1",this.state.tokenIn," = ",this.state.price,this.state.tokenOut))),i.a.createElement(y.a,{size:"lg"}),i.a.createElement("div",null,i.a.createElement(_.a,{type:"primary",onClick:function(){var e=new M.a(n.state.tokenInAmount).multipliedBy(Math.pow(10,C.getDecimalLocal(n.state.tokenIn))),t=new M.a(n.state.tokenOutAmount).multipliedBy(Math.pow(10,C.getDecimalLocal(n.state.tokenOut))).toString(10);n.exchange(n.state.tokenIn,n.state.tokenOut,e,t)}},"\u5151\u6362"))))),i.a.createElement(y.a,{size:"lg"}),i.a.createElement(c.a,{tabs:[{title:"\u5386\u53f2\u8ba2\u5355"},{title:"\u6211\u7684\u8ba2\u5355"}],initialPage:0,onChange:function(e,n){t.setState({orderType:n})}},i.a.createElement(q.a,null,this.renderOrders())))}}]),n}(a.Component),G=(n(230),n(94)),Y=n.n(G),Q=g.a.alert,U=function(e){Object(v.a)(n,e);var t=Object(k.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).state={pk:e.pk,account:{balances:new Map},pairs:[],pair:null,orderList:[],showType:e.showType},a}return Object(d.a)(n,[{key:"init",value:function(e,t){var n=this;e||(e=this.state.account),t||(t=this.state.search),C.pairList(e.mainPKr,t,(function(e){n.setState({pairs:e})}))}},{key:"componentDidMount",value:function(){var e=this;C.init.then((function(){C.accountDetails(e.state.pk,(function(t){e.setState({account:t}),e.init(t),e.timer=setInterval((function(){e.init()}),1e4)}))}))}},{key:"componentWillReceiveProps",value:function(e,t){var n=this;C.accountDetails(e.pk,(function(e){n.setState({account:e}),n.init(e)}))}},{key:"invest",value:function(e,t){var n,a,u=this,r=[{value:e,label:e},{value:t,label:t}],l=e;Q("",i.a.createElement("div",null,i.a.createElement(f.a,null,i.a.createElement(f.a.Item,{style:{flex:1}},"\u6700\u5c0f\u4efd\u989d:"),i.a.createElement(f.a.Item,{style:{flex:2}},i.a.createElement("input",{style:{width:"95%",height:"25px"},onChange:function(e){a=e.target.value}}))),i.a.createElement(y.a,{size:"lg"}),i.a.createElement(f.a,null,i.a.createElement(f.a.Item,{style:{flex:1}},i.a.createElement(H,{style:{marginTop:"22px"},options:r,onChange:function(e){l=e.value}})),i.a.createElement(f.a.Item,{style:{flex:2}},i.a.createElement("input",{style:{width:"95%",height:"25px"},onChange:function(e){n=e.target.value}})))),[{text:"\u53d6\u6d88",onPress:function(){return console.log("cancel")},style:"default"},{text:"\u786e\u5b9a",onPress:function(){C.getDecimal(l,(function(e){var t=new M.a(n).multipliedBy(Math.pow(10,e));C.investLiquidity(u.state.account.pk,u.state.account.mainPKr,a,l,t)}))}}])}},{key:"divest",value:function(e,t){var n,a,u,r=this;Q("",i.a.createElement("div",null,i.a.createElement(f.a,null,i.a.createElement(f.a.Item,{style:{flex:1}},"\u9500\u6bc1:"),i.a.createElement(f.a.Item,{style:{flex:2}},i.a.createElement("input",{style:{width:"95%",height:"25px"},onChange:function(e){u=e.target.value}}))),i.a.createElement(y.a,{size:"lg"}),i.a.createElement(f.a,null,i.a.createElement(f.a.Item,{style:{flex:1}},e,":"),i.a.createElement(f.a.Item,{style:{flex:2}},i.a.createElement("input",{style:{width:"95%",height:"25px"},onChange:function(e){n=e.target.value}}))),i.a.createElement(y.a,{size:"lg"}),i.a.createElement(f.a,null,i.a.createElement(f.a.Item,{style:{flex:1}},t,":"),i.a.createElement(f.a.Item,{style:{flex:2}},i.a.createElement("input",{style:{width:"95%",height:"25px"},onChange:function(e){a=e.target.value}})))),[{text:"\u53d6\u6d88",onPress:function(){return console.log("cancel")},style:"default"},{text:"\u786e\u5b9a",onPress:function(){C.getDecimal(e,(function(i){n=new M.a(n).multipliedBy(Math.pow(10,i)).toString(10),C.getDecimal(t,(function(i){a=new M.a(a).multipliedBy(Math.pow(10,i)).toString(10),C.divestLiquidity(r.state.account.pk,r.state.account.mainPKr,e,t,u,n,a)}))}))}}])}},{key:"render",value:function(){var e=this,t=this.state.pairs.map((function(t,n){return i.a.createElement(z.a,{key:n,style:{marginBottom:"10px"}},i.a.createElement(z.a.Header,{title:i.a.createElement("span",null,t.tokenA,"-",t.tokenB)}),i.a.createElement(z.a.Body,null,i.a.createElement("div",null,Object(B.d)(t.reserveA,C.getDecimalLocal(t.tokenA)),t.tokenA," - ",Object(B.d)(t.reserveB,C.getDecimalLocal(t.tokenB)),t.tokenB)),i.a.createElement(z.a.Footer,{content:i.a.createElement("span",null,i.a.createElement("a",{onClick:function(){e.invest(t.tokenA,t.tokenB)}},"\u63d0\u4f9b\u6d41\u52a8\u6027,(\u603b",t.totalShares,"\u4efd)")),extra:i.a.createElement("span",null,i.a.createElement("a",{onClick:function(){e.divest(t.tokenA,t.tokenB)}},"\u9500\u6bc1\u6d41\u52a8\u6027(",t.myShare,"\u4efd)"))}))}));return i.a.createElement("div",null,i.a.createElement(y.a,{size:"lg"}),i.a.createElement(Y.a,{maxLength:6,onSubmit:function(t){e.setState({search:t},(function(){this.init(this.state.account,t)}))},onCancel:function(){e.setState({search:null},(function(){this.init(this.state.account,null)}))}}),i.a.createElement(y.a,{size:"lg"}),i.a.createElement("div",null,t))}}]),n}(a.Component),X=(g.a.alert,function(e){Object(v.a)(n,e);var t=Object(k.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).state={pk:e.pk,account:{balances:new Map},pairs:[]},a}return Object(d.a)(n,[{key:"init",value:function(e,t){var n=this;e||(e=this.state.account),t||(t=this.state.search),C.pairList(e.mainPKr,t,(function(e){n.setState({pairs:e,search:t})}))}},{key:"componentDidMount",value:function(){var e=this;C.init.then((function(){C.accountDetails(e.props.pk,(function(t){e.setState({account:t}),e.init(t,e.state.search)}))}))}},{key:"componentWillReceiveProps",value:function(e,t){var n=this;C.accountDetails(e.pk,(function(e){n.setState({account:e}),n.init(e)}))}},{key:"render",value:function(){var e=this,t=this.state.pairs.map((function(t,n){return i.a.createElement(q.a.Item,{key:n,style:{marginBottom:"10px"}},i.a.createElement(f.a,null,i.a.createElement(f.a.Item,{style:{flex:2}},i.a.createElement("span",null,t.tokenA,"-",t.tokenB)),i.a.createElement(f.a.Item,{style:{flex:1}},Object(B.d)(t.shareRreward)," CORE"),i.a.createElement(f.a.Item,{style:{flex:1,textAlign:"right"}},i.a.createElement("span",null,i.a.createElement("a",{onClick:function(){t.shareRreward>0&&C.withdrawShareReward(e.state.account.pk,e.state.account.mainPKr,t.tokenA,t.tokenB)}},"\u63d0\u53d6")))))}));return i.a.createElement("div",null,i.a.createElement(y.a,{size:"lg"}),i.a.createElement(Y.a,{maxLength:6,onSubmit:function(t){e.setState({search:t},(function(){this.init(this.state.account,t)}))},onCancel:function(){e.setState({search:null},(function(){this.init(this.state.account,null)}))}}),i.a.createElement(y.a,{size:"lg"}),i.a.createElement("div",null,i.a.createElement(q.a,null,i.a.createElement(q.a.Item,null,i.a.createElement(f.a,null,i.a.createElement(f.a.Item,{style:{flex:2}},"\u8d44\u91d1\u6c60"),i.a.createElement(f.a.Item,{style:{flex:1}},"\u5206\u7ea2"),i.a.createElement(f.a.Item,{style:{flex:1}}))),t)))}}]),n}(a.Component)),J=g.a.operation,Z=g.a.alert,$=[{title:"\u6211\u8981\u5151\u6362",type:"1"},{title:"\u8d44\u91d1\u6c60",type:"2"},{title:"\u5206\u7ea2",type:"3"}],ee=function(e){Object(v.a)(n,e);var t=Object(k.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).state={account:{}},a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this;C.init.then((function(){C.accountList((function(t){e.setState({account:t[0]})}))}))}},{key:"showAccount",value:function(e,t){return e&&e.mainPKr?(t||(t=8),e.name+" "+e.mainPKr.slice(0,t)+"..."+e.mainPKr.slice(-t)):""}},{key:"changeAccount",value:function(){var e=this;C.init.then((function(){C.accountList((function(t){var n=[];t.forEach((function(t,a){n.push({text:i.a.createElement("span",null,e.showAccount(t)),onPress:function(){e.setState({account:t})}})})),J(n)}))}))}},{key:"initExchange",value:function(){var e,t,n=this.state.account,a=[];n.balances.forEach((function(t,n){e||(e=n),t>0&&a.push({value:n,label:n})})),Z("\u521d\u5316\u8d44\u91d1\u6c60",i.a.createElement("div",null,i.a.createElement(f.a,null,i.a.createElement(f.a.Item,{style:{flex:1}},i.a.createElement(H,{style:{marginTop:"22px"},options:a,onChange:function(t){e=t.value}})),i.a.createElement(f.a.Item,{style:{flex:2}},i.a.createElement("input",{style:{width:"95%",height:"25px"},onChange:function(e){t=e.target.value}})))),[{text:"\u53d6\u6d88",onPress:function(){return console.log("cancel")},style:"default"},{text:"\u786e\u5b9a",onPress:function(){C.getDecimal(e,(function(a){var i=new M.a(t).multipliedBy(Math.pow(10,a));C.initializePair(n.pk,n.mainPKr,e,i)}))}}])}},{key:"render",value:function(){var e=this;return i.a.createElement(o.a,null,i.a.createElement(f.a,null,i.a.createElement(f.a.Item,{style:{flex:3}},i.a.createElement("div",{onClick:function(){e.changeAccount()}},this.showAccount(this.state.account,8))),i.a.createElement(f.a.Item,{style:{flex:1}},i.a.createElement("span",null,i.a.createElement("a",{onClick:function(){e.initExchange()}},"\u521d\u5316\u8d44\u91d1\u6c60")))),i.a.createElement(y.a,{size:"lg"}),i.a.createElement(c.a,{tabs:$,initialPage:0},i.a.createElement("div",null,i.a.createElement(N,{pk:this.state.account.pk})),i.a.createElement("div",null,i.a.createElement(U,{pk:this.state.account.pk})),i.a.createElement("div",null,i.a.createElement(X,{pk:this.state.account.pk}))))}}]),n}(a.Component);var te=function(){return i.a.createElement("div",{className:"App"},i.a.createElement(ee,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(te,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[238,1,2]]]);